<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>b_oncamera: Portfolio</title>
  <meta name="description" content="Photography Portfolio" />
  <!-- Braven via CDN -->
  <link href="https://fonts.cdnfonts.com/css/braven" rel="stylesheet">
  <style>
    :root{
      --bg-home:#DBDBDB;        /* requested home background */
      --bg-portfolio:#ffffff;
      --surface:#ffffff;
      /* Tungsten-like dark but translucent */
      --about-surface: rgba(38, 40, 43, 0.56);
      --about-text:#eef2f4;
      --muted:#67706a;
      --text:#111217;
      --accent-home:#6aa6ff;
      --accent-portfolio:#4fbfa6;
      --gap:18px;
      --maxw:1100px;
      --radius:12px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Braven", Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:var(--text);
      background:var(--bg-home);
      transition:background 0.3s ease;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    a{color:inherit;text-decoration:none}
    header{
      background:transparent;
      border-bottom:1px solid rgba(17,18,23,0.06);
      position:sticky; top:0; z-index:40;
      backdrop-filter: blur(6px);
    }

    .wrap{max-width:var(--maxw);margin:0 auto;padding:16px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand img{height:36px;width:auto;display:block}

    /* Header tabs styling */
    nav ul{display:flex;gap:18px;list-style:none;padding:0;margin:0}
    nav .nav-btn{
      background:none;border:0;color:var(--muted);padding:6px 12px;border-radius:8px;cursor:pointer;font-weight:600;
      transition:all .12s ease;font-family:inherit;
      text-transform:uppercase;letter-spacing:4px;font-size:13px;
      border:2px solid transparent;
      display:inline-block;
    }
    nav .nav-btn.inactive{ color:var(--muted); background:transparent; border-color:transparent; }
    nav .nav-btn.active{
      color:var(--text);
      border-color:rgba(17,18,23,0.12);
      background:transparent;
      padding:10px 18px;
      border-radius:6px;
      letter-spacing:3.5px;
    }

    /* We'll reuse the same style for Back button via .nav-like */
    .nav-like{
      background:none;border:0;color:var(--muted);padding:6px 12px;border-radius:8px;cursor:pointer;font-weight:600;
      transition:all .12s ease;font-family:inherit;
      text-transform:uppercase;letter-spacing:4px;font-size:13px;
      border:2px solid transparent;
      display:inline-block;margin-bottom:12px;
    }
    .nav-like.inactive{ color:var(--muted); background:transparent; border-color:transparent; }
    .nav-like.active{
      color:var(--text);
      border-color:rgba(17,18,23,0.12);
      background:transparent;
      padding:10px 18px;
      border-radius:6px;
      letter-spacing:3.5px;
    }

    main{padding:28px 20px}
    .section{max-width:var(--maxw);margin:0 auto;padding:0 12px}

    /* Slideshow */
    .slideshow{position:relative;border-radius:12px;overflow:hidden;background:var(--surface);border:1px solid rgba(17,18,23,0.04);box-shadow:0 8px 28px rgba(11,12,13,0.04)}
    .slide{width:100%;height:520px;display:flex;align-items:center;justify-content:center;background:#efefef}
    .slide img{width:100%;height:100%;object-fit:cover;display:block}
    .slideshow .controls{position:absolute;right:12px;top:12px;display:flex;gap:8px;z-index:3;padding:6px}
    .dot{width:10px;height:10px;border-radius:50%;background:rgba(17,18,23,0.12);cursor:pointer}
    .dot.active{box-shadow:0 0 0 4px rgba(17,18,23,0.03), inset 0 0 0 2px rgba(255,255,255,0.6)}

    /* About box: tungsten-like translucent */
    .about{
      background:var(--about-surface);
      padding:24px;border-radius:12px;margin:20px auto 0;
      max-width:880px;border:1px solid rgba(255,255,255,0.04);
      color:var(--about-text);
      backdrop-filter: blur(4px);
    }
    .about-inner{display:flex;gap:20px;align-items:center}
    .avatar{width:110px;height:110px;border-radius:999px;overflow:hidden;flex:0 0 110px;border:1px solid rgba(255,255,255,0.06)}
    .avatar img{width:100%;height:100%;object-fit:cover}
    .about p{margin:0;color:var(--about-text);line-height:1.95;font-size:15px}
    .about p + p{margin-top:16px}

    /* Portfolio: equal-size 2x2 tiles */
    .albums-grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:28px;
      max-width:980px;margin:10px auto;
      grid-auto-rows:360px; /* fixed row height — ensures all tiles same size */
      align-items:stretch;
    }
    .album-card{
      position:relative;border-radius:12px;overflow:hidden;
      cursor:pointer;border:1px solid rgba(17,18,23,0.04);
      box-shadow:0 12px 30px rgba(11,12,13,0.04);
      background:var(--surface);display:flex;flex-direction:column;height:100%;
    }
    .album-thumb{width:100%;flex:1 1 auto;min-height:0;background:#f2f2f2;display:block}
    .album-thumb img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .6s ease}
    .album-card:hover .album-thumb img{transform:scale(1.03)}

    .album-overlay{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
      width:44%;max-width:320px;padding:20px;border-radius:6px;
      background:rgba(255,255,255,0.92);
      text-align:center;box-shadow:0 8px 24px rgba(11,12,13,0.06);
    }
    .album-overlay img{width:48px;height:48px;object-fit:contain;margin-bottom:10px}
    .album-overlay .title{
      font-style:italic;font-size:20px;color:#222;
      font-family: "Braven", Inter, sans-serif;
    }

    /* album page title uses same header button font/weight/spacing */
    .page-title{
      font-family: "Braven", Inter, sans-serif;
      text-transform:uppercase;
      letter-spacing:4px;
      font-weight:600;
      margin:18px 0 12px;
      font-size:16px;
    }

    /* Album page grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
    .grid img{width:100%;height:160px;object-fit:cover;border-radius:8px;cursor:pointer}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,0.85);z-index:9999}
    .lightbox.visible{display:grid}
    .lightbox img{max-width:92%;max-height:86%}

    footer{padding:26px 0;text-align:center;color:var(--muted)}

    /* Responsive */
    @media (max-width:920px){
      .slide{height:360px}
      .albums-grid{grid-template-columns:repeat(2,1fr);grid-auto-rows:320px}
      .about-inner{flex-direction:row}
      .album-overlay{width:56%}
    }
    @media (max-width:720px){
      .slide{height:280px}
      .albums-grid{grid-template-columns:1fr;grid-auto-rows:auto}
      .about-inner{flex-direction:row}
      .about{padding:16px}
      .avatar{width:80px;height:80px;flex:0 0 80px}
      .album-thumb{height:220px}
      .album-overlay{width:70%}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <img src="images/logo.png" alt="logo" onerror="this.style.display='none'">
      </div>
      <nav>
        <ul>
          <li><button id="tab-home" class="nav-btn active">Home</button></li>
          <li><button id="tab-portfolio" class="nav-btn inactive">Portfolio</button></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <div id="content" class="section"></div>
  </main>

  <div id="lightbox" class="lightbox" role="dialog" aria-hidden="true">
    <img id="lbimg" src="" alt="">
    <div id="lbcaption" style="color:#fff;margin-top:12px;text-align:center"></div>
  </div>

  <footer>b_oncamera</footer>

<script>
/* app logic */
let albums = [];
async function loadAlbums(){
  try{
    const res = await fetch('albums.json');
    if(!res.ok) throw new Error('albums.json not found');
    albums = await res.json();
  }catch(e){
    albums = [];
    console.error('Could not load albums.json', e);
  }
}
function el(tag, opts={}, ...kids){ const e=document.createElement(tag); Object.assign(e, opts); for(const k of kids) if(typeof k==='string') e.appendChild(document.createTextNode(k)); else if(k) e.appendChild(k); return e; }

const SLIDES = [
  {folder:'nature', file:'N_37.jpg'},
  {folder:'city-trails', file:'C_04.jpg'},
  {folder:'animals', file:'A_02.jpg'},
  {folder:'others', file:'O_14.jpg'}
];

function showHome(){
  document.body.style.background = "var(--bg-home)";
  const content = document.getElementById('content'); content.innerHTML='';
  const slideWrap = el('div',{className:'slideshow'});
  const slide = el('div',{className:'slide'}); slideWrap.appendChild(slide);
  const controls = el('div',{className:'controls'}); slideWrap.appendChild(controls);

  const covers=[];
  SLIDES.forEach(s=>{
    const alb = albums.find(a=>a.folder===s.folder);
    if(alb && alb.images && alb.images.some(i=>i.file===s.file)){
      covers.push({album:alb, item:{file:s.file}});
    } else {
      covers.push({album:{folder:s.folder,title:''}, item:{file:s.file}});
    }
  });

  const existing=[]; let done=0;
  covers.forEach(c=>{
    const imgTest = new Image();
    imgTest.onload = ()=>{ existing.push(c); done++; if(done===covers.length) start(existing); };
    imgTest.onerror = ()=>{ done++; if(done===covers.length) start(existing); };
    imgTest.src = `images/${c.album.folder}/${c.item.file}`;
  });

  if(covers.length===0){ slide.appendChild(el('div',{},'No photos yet.')); content.appendChild(slideWrap); addAbout(content); setActiveTab('home'); return; }

  function start(arr){
    if(arr.length===0){ slide.appendChild(el('div',{},'No photos yet.')); content.appendChild(slideWrap); addAbout(content); setActiveTab('home'); return; }
    let i=0;
    function render(){
      const src = `images/${arr[i].album.folder}/${arr[i].item.file}`;
      slide.innerHTML=''; slide.appendChild(el('img',{src:src,alt:arr[i].item.file}));
      controls.innerHTML='';
      arr.forEach((_,idx)=>{ const d=el('div',{className:'dot' + (idx===i?' active':'')}); d.onclick=()=>{ i=idx; render(); }; controls.appendChild(d); });
    }
    render();
    let t = setInterval(()=>{ i=(i+1)%arr.length; render(); },1000); // much faster (1s)
    slideWrap.addEventListener('mouseenter',()=>clearInterval(t));
    slideWrap.addEventListener('mouseleave',()=>{ t=setInterval(()=>{ i=(i+1)%arr.length; render(); },1000); });
    content.appendChild(slideWrap);
    addAbout(content);
    setActiveTab('home');
  }
}

function addAbout(content){
  const about = el('aside',{className:'about'});
  const ai = el('div',{className:'about-inner'});
  const avatar = el('div',{className:'avatar'});
  avatar.appendChild(el('img',{src:'images/profile.jpg',alt:'Profile'}));
  const txt = el('div',{});
  txt.appendChild(el('p',{},'Just a girl with a Canon EOS M200, capturing life’s little quirks ⛶'));
  txt.appendChild(el('p',{},'◉ Lenses: EF-M 15-45mm & EF-M 55-200mm'));
  ai.appendChild(avatar); ai.appendChild(txt); about.appendChild(ai);
  content.appendChild(about);
}

function showPortfolio(){
  document.body.style.background = "var(--bg-portfolio)";
  const content = document.getElementById('content'); content.innerHTML='';
  const grid = el('div',{className:'albums-grid'});
  const iconMap = {
    "nature":"nature.png",
    "city-trails":"city.png",
    "animals":"animals.png",
    "others":"others.png"
  };
  albums.forEach(a=>{
    const card = el('div',{className:'album-card'});
    const thumb = el('div',{className:'album-thumb'});
    const cover = (a.images && a.images.length)? a.images[0] : null;
    if(cover) thumb.appendChild(el('img',{src:`images/${a.folder}/${cover.file}`,alt:cover.file}));
    else thumb.appendChild(el('div',{},'No photos'));

    const overlay = el('div',{className:'album-overlay'});
    if(iconMap[a.folder]) overlay.appendChild(el('img',{src:`images/${iconMap[a.folder]}`,alt:a.title+" icon"}));
    overlay.appendChild(el('div',{className:'title'}, a.title));
    card.appendChild(thumb);
    card.appendChild(overlay);
    card.onclick = ()=> showAlbum(a.folder);
    grid.appendChild(card);
  });
  content.appendChild(grid);
  setActiveTab('portfolio');
}

function showAlbum(folder){
  document.body.style.background = "var(--bg-portfolio)";
  const album = albums.find(a=>a.folder===folder);
  if(!album) return;
  const content = document.getElementById('content'); content.innerHTML='';
  // back button styled like header buttons (active look)
  const back = el('button',{className:'nav-like active'},'← Back');
  back.onclick = ()=>{ setActiveTab('portfolio'); showPortfolio(); };
  content.appendChild(back);

  // album title styled like header buttons
  const title = el('h2',{className:'page-title'}, album.title);
  content.appendChild(title);

  const g = el('div',{className:'grid'});
  album.images.forEach((img,ii)=>{
    const im = el('img',{src:`images/${album.folder}/${img.file}`,alt:img.caption||img.file});
    im.dataset.album=album.folder; im.dataset.index=ii;
    im.addEventListener('click', ()=>openLightbox(album.folder, ii));
    g.appendChild(im);
  });
  content.appendChild(g);
}

function openLightbox(folder, index){
  const album = albums.find(a=>a.folder===folder);
  if(!album) return;
  const item = album.images[index];
  const lb = document.getElementById('lightbox'), lbimg = document.getElementById('lbimg'), lbcap = document.getElementById('lbcaption');
  lbimg.src = `images/${folder}/${item.file}`; lbcap.textContent = item.caption||''; lb.classList.add('visible'); lb.setAttribute('aria-hidden','false');
}
function closeLightbox(){ const lb = document.getElementById('lightbox'); lb.classList.remove('visible'); lb.setAttribute('aria-hidden','true'); }
document.getElementById('lightbox').addEventListener('click', closeLightbox);

function setActiveTab(id){
  // header tab visuals
  document.querySelectorAll('nav .nav-btn').forEach(b=>{ b.classList.remove('active'); b.classList.add('inactive'); });
  const homeBtn = document.getElementById('tab-home'), portBtn = document.getElementById('tab-portfolio');
  if(id==='home'){ homeBtn.classList.add('active'); homeBtn.classList.remove('inactive'); portBtn.classList.remove('active'); portBtn.classList.add('inactive'); }
  else { portBtn.classList.add('active'); portBtn.classList.remove('inactive'); homeBtn.classList.remove('active'); homeBtn.classList.add('inactive'); }
}

async function init(){
  await loadAlbums();
  document.getElementById('tab-home').addEventListener('click', ()=>{ setActiveTab('home'); showHome(); history.pushState({},'', '#home'); });
  document.getElementById('tab-portfolio').addEventListener('click', ()=>{ setActiveTab('portfolio'); showPortfolio(); history.pushState({},'', '#portfolio'); });

  const hash = location.hash.replace('#','');
  if(hash && hash.startsWith('album/')){ const folder = hash.split('/')[1]; setActiveTab('portfolio'); showAlbum(folder); }
  else if(hash==='portfolio'){ setActiveTab('portfolio'); showPortfolio(); } else { setActiveTab('home'); showHome(); }
}
init();
</script>
</body>
</html>
